---
sidebar_position: 8
---

import ViewSource from "@site/src/components/ViewSource";
import Answer from "@site/src/components/Answer";

# 繰り返し処理

## for 文

今までに習ったことを使って、1 から 10 までの和を求めるプログラムを書いてみましょう。

<ViewSource path="/for/sum_1to10.ipynb" />

これぐらいなら、簡単に書けます。

では、1 から 20 までの和はどうでしょう。

<ViewSource path="/for/sum_1to20.ipynb" />

だんだん大変になってきました。

では、1 から 100 までの和ならどうでしょう。

<ViewSource path="/for/sum_1to100.ipynb" />

一応作ることはできますが、時間がかかりますし、打ち間違いをする可能性も高くなってきます。もう少し良い方法を考えなければなりません。

ここで for 文の出番です。for 文は、繰り返し処理を簡単に書くことができます。1 から 100 までの和を for 文を用いて求めるプログラムを見てみましょう。

<ViewSource path="/for/for_sum_1to100.ipynb" />

for 文を用いると、このように簡単に書くことができます。また、問題が少し変わっても、すぐにそれに合わせたプログラムを作ることができ拡張性があります。例えば、1 から 1000 の和はこのプログラムの `101` を `1001` にするだけで簡単に作ることができます。

<ViewSource path="/for/for_sum_1to1000.ipynb" />

:::info
`sum += i` は、`sum = sum + i` と同じ意味です。累算代入演算子と呼ばれます。
次のように、様々なものがあります。

| 演算子 | 例       | 説明              |
| ------ | -------- | ----------------- |
| `+=`   | `a += b` | `a = a + b`と同じ |
| `-=`   | `a -= b` | `a = a - b`と同じ |
| `*=`   | `a *= b` | `a = a * b`と同じ |
| `/=`   | `a /= b` | `a = a / b`と同じ |

:::

for 文の構文は次のようになっています。

```python
for 変数名 in range(開始値, 終端値):
    任意の処理
```

for 文についてよりよく理解するため 1 から 10 までを出力するプログラムを見てみましょう。

<ViewSource path="/for/for_1to10.ipynb" />

for 文の中の処理が繰り返し行われています。for 文に指定した変数（ここでは `i` ）に、1 回目の処理では 1 が、2 回目の処理では 2 が、…、10 回目の処理では 10 が入っています。つまり、数学的に書けば、`i` には、開始値を $a$ 、終端値を $b$ とすると $[a,b)$ となるような整数が順番に入っていることになります。

for 文は同じ処理をただ繰り返したいときにも用いることができます。

<ViewSource path="/for/for_hello.ipynb" />

:::note
上記のプログラムは、次のようにしても実行できます。

<ViewSource path="/for/for_hello2.ipynb" />

次のプログラムを見れば分かるように、 `range` 関数に引数を一つだけ渡すと、`i` には $[0, a)$ （$a$ を引数とする）となるような整数が順番に渡されます。

<ViewSource path="/for/range.ipynb" />
:::

:::note while 文
Python では、while 文も使うことができます。
while 文の構文は次のようになっています。条件が真のときに実行し続けます。

```python
while 条件:
    任意の処理
```

例として、1 から 10 までの和を求める while 文を使ったプログラムを見てみましょう。

<ViewSource path="/for/while.ipynb" />

:::

### 練習問題 1

$1$ から $n$ までの和を求める関数を作って、実際に 1 から 10 までの和を求めてみましょう。

<Answer>
<ViewSource path="/for/upto.ipynb" />

実は、このプログラムは次のようにしてもっと簡単に書くことができます。しかし、次項の配列の内容がわかっていないと理解できないため、次項で詳しく紹介します。

<ViewSource path="/for/upto_sum.ipynb" />
</Answer>

### 練習問題 2

$n$ の階乗を求める関数を作って、実際に 10 の階乗を求めてみましょう。

<Answer>
<ViewSource path="/for/factorial.ipynb" />

ちなみに、`math` ライブラリに階乗を計算するプログラムが入っているようです。[公式ドキュメントはこちら](https://docs.python.org/ja/3/library/math.html#math.factorial)

これを使えば、次のようになります。

<ViewSource path="/for/factorial_lib.ipynb" />
</Answer>
